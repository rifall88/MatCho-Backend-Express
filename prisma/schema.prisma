generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum Role {
  admin
  user
}

model User {
  id                Int         @id @default(autoincrement())
  name              String?     @db.VarChar(100)
  username          String?     @unique @db.VarChar(255)
  email             String?     @unique @db.VarChar(255)
  phone             Int?        @db.Int
  role              Role        @default(user)
  updated_at        DateTime?   @default(now()) @db.Timestamp(0) @map("updated_at")
  updated_by        Int?
  created_at        DateTime?   @default(now()) @db.Timestamp(0) @map("created_at")
  created_by        Int?
  deleted_at        DateTime?   @default(now()) @db.Timestamp(0) @map("deleted_at")
  is_enable         Boolean     @default(true)
  is_update         Boolean     @default(false)
  updated           User?        @relation("userupdated", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  created           User?        @relation("usercreated", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  updateuser        User[]      @relation("userupdated")
  createuser        User[]      @relation("usercreated")
  updateproduct     Product[]   @relation("productupdated")
  createproduct     Product[]   @relation("productcreated")
  carts             Cart[]
  updatecart        Cart[]      @relation("cartupdated")
  createcart        Cart[]      @relation("cartcreated")
  orders            Order[]
  updateorder       Order[]      @relation("orderupdated")
  createorder       Order[]      @relation("ordercreated")
  shippings         Shipping[]
  updateshipping    Shipping[]      @relation("shippingupdated")
  createshipping    Shipping[]      @relation("shippingcreated")
  @@map("users")
}

model Product {
  id                Int         @id @default(autoincrement())
  product_name      String?     @db.VarChar(100)
  is_matcha         Boolean?    @default(true)
  description       String?     @db.Text
  price             Int?         @db.Int
  stock             Int?         @db.Int
  weight            Int?         @db.Int
  image_url         String?      @db.VarChar(255)
  updated_at        DateTime?   @default(now()) @db.Timestamp(0) @map("updated_at")
  updated_by        Int?
  created_at        DateTime?   @default(now()) @db.Timestamp(0) @map("created_at")
  created_by        Int?
  deleted_at        DateTime?   @default(now()) @db.Timestamp(0) @map("deleted_at")
  is_enable         Boolean     @default(true)
  is_update         Boolean     @default(false)
  updated           User?        @relation("productupdated", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  created           User?        @relation("productcreated", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  carts             Cart[]
  orders            Order[]
  @@map("products")
}

model Cart {
  id                Int         @id @default(autoincrement())
  user_id           Int?
  product_id        Int?
  subtotal          Int?        @db.Int
  quantity          Int?        @db.Int
  updated_at        DateTime?   @default(now()) @db.Timestamp(0) @map("updated_at")
  updated_by        Int?
  created_at        DateTime?   @default(now()) @db.Timestamp(0) @map("created_at")
  created_by        Int?
  deleted_at        DateTime?   @default(now()) @db.Timestamp(0) @map("deleted_at")
  is_enable         Boolean     @default(true)
  is_update         Boolean     @default(false)
  user              User?        @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  updated           User?        @relation("cartupdated", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  created           User?        @relation("cartcreated", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product           Product?     @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  @@map("carts")
}

model Order {
  id                Int         @id @default(autoincrement())
  user_id           Int?
  product_id        Int?
  subtotal          Int?        @db.Int
  status            String?     @db.VarChar(100)
  quantity          Int?        @db.Int
  updated_at        DateTime?   @default(now()) @db.Timestamp(0) @map("updated_at")
  updated_by        Int?
  created_at        DateTime?   @default(now()) @db.Timestamp(0) @map("created_at")
  created_by        Int?
  deleted_at        DateTime?   @default(now()) @db.Timestamp(0) @map("deleted_at")
  is_enable         Boolean     @default(true)
  is_update         Boolean     @default(false)
  user              User?        @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  updated           User?        @relation("orderupdated", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  created           User?        @relation("ordercreated", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  product           Product?     @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  shippings         Shipping[]
  @@map("orders")
}

model Shipping {
  id                Int         @id @default(autoincrement())
  user_id           Int?
  order_id          Int?
  recipient_name    String?     @db.VarChar(100)
  phone             Int?        @db.Int
  province          String?     @db.VarChar(100)
  city              String?     @db.VarChar(100)
  postal_code       Int?        @db.Int
  address           String?     @db.VarChar(255)
  updated_at        DateTime?   @default(now()) @db.Timestamp(0) @map("updated_at")
  updated_by        Int?
  created_at        DateTime?   @default(now()) @db.Timestamp(0) @map("created_at")
  created_by        Int?
  deleted_at        DateTime?   @default(now()) @db.Timestamp(0) @map("deleted_at")
  is_enable         Boolean     @default(true)
  is_update         Boolean     @default(false)
  user              User?        @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  updated           User?        @relation("shippingupdated", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  created           User?        @relation("shippingcreated", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction)
  order             Order?       @relation(fields: [order_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  @@map("shippings")
}